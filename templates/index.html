<!DOCTYPE html>
<html>

<head>
    <link rel="stylesheet" href="https://unpkg.com/xp.css">
    <link rel="stylesheet" href="{{ url_for('static', filename='index.css') }}">
    <link rel="stylesheet" href="{{ url_for('static', filename='person-styles.css') }}">
</head>
<body>
    <section id="desktop">
        <div class="desktop-icon" id="back-icon" style="top: 20px; left: 20px;">
            <div class="icon-container">
                <img src="{{ url_for('static', filename='Icons/back button.png') }}" alt="Back" width="42px" height="42px">
            </div>
            <div class="label">Back</div>
        </div>

        <div id="taskbar">
            <div class="background sliced vertical">
                <div class="row top"></div>
                <div class="row middle"></div>
                <div class="row bottom"></div>
            </div>
            <div id="start-button">
                <div class="container">
                    <div class="background sliced">
                        <div class="column left">
                            <div class="row top"></div>
                            <div class="row middle"></div>
                            <div class="row bottom"></div>
                        </div>
                        <div class="column middle">
                            <div class="row top"></div>
                            <div class="row middle"></div>
                            <div class="row bottom"></div>
                        </div>
                        <div class="column right">
                            <div class="row top"></div>
                            <div class="row middle"></div>
                            <div class="row bottom"></div>
                        </div>
                    </div>
                    <div class="content">
                        <span class="icon"><img src="https://raw.githubusercontent.com/tdcosta100/WindowsXP/master/images/System/WindowsLogo-small.png" /></span>
                        <span class="text">Start</span>
                    </div>
                    <div class="overlay" title="Click here to begin"></div>
                </div>
            </div>
            <div id="task-band"></div>
            <div id="tray-notify">
                <div class="container">
                    <div class="background sliced">
                        <div class="column left">
                            <div class="row top"></div>
                            <div class="row middle"></div>
                            <div class="row bottom"></div>
                        </div>
                        <div class="column middle">
                            <div class="row top"></div>
                            <div class="row middle"></div>
                            <div class="row bottom"></div>
                        </div>
                        <div class="column right">
                            <div class="row top"></div>
                            <div class="row middle"></div>
                            <div class="row bottom"></div>
                        </div>
                    </div>
                    <div class="content">
                        <div class="clock">
                            <div class="text">01:57</div>
                            <div class="overlay" title="Monday, April 8, 2019"></div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <div id="analysis-window" class="window" style="width: 800px; height: 600px; top: 50px; left: 100px; position: absolute; z-index: 100;">
        <div class="title-bar">
            <img src="{{ url_for('static', filename='Icons/HardDrive.ico') }}" width="20px">
            <div class="title-bar-text">Information Theory Analysis</div>
            <div class="title-bar-controls">
                <button aria-label="Minimize"></button>
                <button aria-label="Maximize"></button>
                <button aria-label="Close"></button>
            </div>
        </div>
        <div class="window-body">
            <menu role="menubar">
                <li role="menuitem">File</li>
                <li role="menuitem">View</li>
                <li role="menuitem">Help</li>
            </menu>

            <div style="padding: 10px;">
                <input type="file" id="file-input" accept=".txt" style="display: none;">
                <button id="file-select-button" class="xp-button">Choose Text File</button>
                <span id="file-name" style="margin-left: 10px; font-family: 'Tahoma', sans-serif; font-size: 11px;">No file selected</span>
                <button id="analyze-button" class="xp-button" style="margin-left: 20px;" disabled>Analyze</button>
            </div>

            <div class="results-container" id="results-container" style="display: none;">
                <!-- Section 1: PMF and Probability Distribution -->
                <div class="result-section">
                    <h3>1. Probability Mass Function (PMF)</h3>
                    <div id="pmf-display"></div>
                    <canvas id="pmf-chart"></canvas>
                </div>

                <!-- Section 2: Entropy Calculations -->
                <div class="result-section">
                    <h3>2. Entropy Analysis</h3>
                    <div class="entropy-values">
                        <div class="result-item">
                            <span class="result-label">Entropy H(X):</span>
                            <span class="result-value" id="entropy-value">-</span>
                        </div>
                        <div class="result-item">
                            <span class="result-label">Relative Entropy D(P||Q):</span>
                            <span class="result-value" id="relative-entropy-value">-</span>
                        </div>
                    </div>
                </div>

                <!-- Section 3: Channel Simulation -->
                <div class="result-section">
                    <h3>3. Binary Symmetric Channel Simulation (p = 5%)</h3>
                    
                    <div class="result-item">
                        <span class="result-label">Original Text Length:</span>
                        <span class="result-value" id="original-length">-</span>
                    </div>
                    <div class="text-preview" id="original-text-preview"></div>

                    <div class="result-item" style="margin-top: 15px;">
                        <span class="result-label">Encoded Bits (X_coded):</span>
                        <span class="result-value" id="encoded-length">-</span>
                    </div>
                    <div class="text-preview" id="encoded-bits-preview"></div>

                    <div class="result-item" style="margin-top: 15px;">
                        <span class="result-label">Received Bits (Y_received):</span>
                        <span class="result-value" id="received-length">-</span>
                    </div>
                    <div class="result-item">
                        <span class="result-label">Number of Bit Errors:</span>
                        <span class="result-value" id="num-errors">-</span>
                    </div>
                    <div class="text-preview" id="received-bits-preview"></div>

                    <div class="result-item" style="margin-top: 15px;">
                        <span class="result-label">Decoded Text (Y):</span>
                        <span class="result-value" id="decoded-length">-</span>
                    </div>
                    <div class="result-item">
                        <span class="result-label">Characters Decoded Correctly:</span>
                        <span class="result-value" id="correctly-decoded">-</span>
                    </div>
                    <div class="result-item">
                        <span class="result-label">Character Error Rate:</span>
                        <span class="result-value" id="error-rate">-</span>
                    </div>
                    <div class="text-preview" id="decoded-text-preview"></div>
                </div>

                <!-- Section 4: Joint and Conditional Entropy -->
                <div class="result-section">
                    <h3>4. Joint and Conditional Entropy</h3>
                    <div class="entropy-values">
                        <div class="result-item">
                            <span class="result-label">Joint Entropy H(X,Y):</span>
                            <span class="result-value" id="joint-entropy-value">-</span>
                        </div>
                        <div class="result-item">
                            <span class="result-label">Conditional Entropy H(Y|X):</span>
                            <span class="result-value" id="conditional-entropy-value">-</span>
                        </div>
                    </div>
                </div>

                <!-- Section 5: Chain Rule Verification -->
                <div class="result-section">
                    <h3>5. Chain Rule Verification: H(X,Y) = H(X) + H(Y|X)</h3>
                    <div class="result-item">
                        <span class="result-label">H(X,Y) [Left Side]:</span>
                        <span class="result-value" id="chain-lhs">-</span>
                    </div>
                    <div class="result-item">
                        <span class="result-label">H(X) + H(Y|X) [Right Side]:</span>
                        <span class="result-value" id="chain-rhs">-</span>
                    </div>
                    <div class="result-item">
                        <span class="result-label">Difference:</span>
                        <span class="result-value" id="chain-diff">-</span>
                    </div>
                    <div class="verification-box" id="verification-result">
                        Chain rule verification pending...
                    </div>
                </div>
            </div>
        </div>
        <div class="resize-handle"></div>
    </div>


    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <script src="{{ url_for('static', filename='script.js') }}"></script>
</body>

</html>
